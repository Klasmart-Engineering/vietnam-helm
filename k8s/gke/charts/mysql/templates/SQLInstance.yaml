apiVersion: sql.cnrm.cloud.google.com/v1beta1
kind: SQLInstance
metadata:
  annotations:
    cnrm.cloud.google.com/project-id : "{{ .Values.gcp.project }}"  
  name: "{{ .Values.gcp.mysql_name }}"
spec:
  databaseVersion: {{ .Values.gcp.mysql_version }}
  region: {{ .Values.gcp.region }}
  settings:
    availabilityType: "REGIONAL"
    tier: "{{ .Values.gcp.mysql_tier }}"
    diskAutoresize: true
    diskSize: {{ .Values.gcp.mysql_disk_size }}
    diskType: "{{ .Values.gcp.mysql_disk_type }}"
    backupConfiguration:
      binaryLogEnabled: true
      enabled: true
    ipConfiguration:
      requireSsl: false
      ipv4Enabled: false  # No public IP address
      privateNetworkRef: 
        external: "{{ .Values.gcp.network }}"
      requireSsl: true
        